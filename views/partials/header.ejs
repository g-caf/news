<header class="site-header">
    <div class="header-content">
        <h1 class="site-title">
            <a href="/">üì∞ NewsHub</a>
        </h1>
        
        <div class="filter-controls">
            <select name="topic" class="filter-select" onchange="
                console.log('Topic changed:', this.value);
                const url = new URL(window.location.href);
                url.searchParams.delete('tag'); url.searchParams.delete('category'); url.searchParams.delete('offset');
                if (this.value) url.searchParams.set('tag', this.value);
                window.location.href = url.toString();
            ">
                <option value="">All Topics</option>
                <% if (typeof topicTags !== 'undefined') { %>
                    <% topicTags.forEach(tag => { %>
                        <option value="<%= tag %>" <%= (typeof selectedTag !== 'undefined' && selectedTag === tag) ? 'selected' : '' %>><%= tag %></option>
                    <% }) %>
                <% } %>
            </select>
            
            <select name="category" class="filter-select" onchange="
                console.log('Category changed:', this.value);
                const url = new URL(window.location.href);
                url.searchParams.delete('tag'); url.searchParams.delete('category'); url.searchParams.delete('offset');
                if (this.value) url.searchParams.set('category', this.value);
                window.location.href = url.toString();
            ">
                <option value="">All Types</option>
                <% if (typeof categories !== 'undefined') { %>
                    <% categories.forEach(category => { %>
                        <option value="<%= category %>" <%= (typeof selectedCategory !== 'undefined' && selectedCategory === category) ? 'selected' : '' %>><%= category %></option>
                    <% }) %>
                <% } %>
            </select>
        </div>
        
        <form class="search-form" action="/search" method="GET">
            <input type="search" name="q" placeholder="Search..." value="<%= typeof query !== 'undefined' ? query : '' %>">
            <button type="submit">üîç</button>
        </form>
    </div>
</header>
